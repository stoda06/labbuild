{# dashboard/templates/_form_fields.html #}
{# Core fields, Advanced fields will be in index.html directly #}

<div class="row g-3">
    <div class="col-md-4 mb-3">
        <label for="command" class="form-label">Command <span class="text-danger">*</span></label>
        <select class="form-select" id="command" name="command" required>
            <option value="" disabled selected>Select Command...</option>
            <option value="setup">Setup</option>
            <option value="teardown">Teardown</option>
            <option value="manage">Manage</option>
        </select>
    </div>
    <div class="col-md-4 mb-3">
        <label for="vendor" class="form-label">Vendor <span class="text-danger">*</span></label>
        <select class="form-select" id="vendor" name="vendor" required>
            <option value="" disabled selected>Select Vendor...</option>
            {% for v_opt in vendors %}
            <option value="{{ v_opt }}">{{ v_opt|upper }}</option>
            {% endfor %}
        </select>
    </div>
    {# Course Input - JS will enhance this #}
    <div class="col-md-4 mb-3 position-relative"> {# Added position-relative for custom dropdown #}
        <label for="course" class="form-label">Course <span class="text-danger">*</span></label>
        <input type="text" class="form-control" id="course" name="course" placeholder="Type or select..." required
            list="course-suggestions-datalist" autocomplete="off">
        <datalist id="course-suggestions-datalist"></datalist>
        <div id="customCourseDropdown" class="dropdown-menu w-100" style="max-height: 200px; overflow-y: auto;">
            {# Suggestions will be populated here by JS #}
        </div>
    </div>

    <div class="col-md-4 mb-3" id="hostGroup">
        <label for="host" class="form-label">Host</label>
        <select class="form-select" id="host" name="host">
            <option value="">Select Host</option>
            {% for h_opt in hosts %}
            <option value="{{ h_opt }}">{{ h_opt }}</option>
            {% endfor %}
        </select>
        <div class="form-text text-muted">Required for most operations.</div>
    </div>

    <div class="col-md-2 mb-3" id="startPodGroup">
        <label for="start_pod" class="form-label">Start Pod</label>
        <input type="number" class="form-control" id="start_pod" name="start_pod" min="0">
    </div>
    <div class="col-md-2 mb-3" id="endPodGroup">
        <label for="end_pod" class="form-label">End Pod</label>
        <input type="number" class="form-control" id="end_pod" name="end_pod" min="0">
    </div>

    <div class="col-md-4 mb-3" id="f5ClassNumberGroup" style="display: none;">
        <label for="class_number" class="form-label">F5 Class #</label>
        <input type="number" class="form-control" id="class_number" name="class_number" min="0">
        <div class="form-text text-muted">Required for F5 operations.</div>
    </div>

    <div class="col-md-4 mb-3" id="manageOperationGroup" style="display: none;">
        <label for="operation" class="form-label">Manage Operation <span class="text-danger">*</span></label>
        <select class="form-select" id="operation" name="operation">
            <option value="">N/A</option>
            <option value="start">Start</option>
            <option value="stop">Stop</option>
            <option value="reboot">Reboot</option>
        </select>
        <div class="form-text text-muted">Required for Manage command.</div>
    </div>

    {# Component Field - To be replaced/enhanced by JS dropdown with checkboxes #}
    <div class="col-md-4 mb-3" id="componentWrapper">
        <label for="component" class="form-label">Component(s)</label>
        <div class="dropdown">
            <button class="btn btn-outline-secondary dropdown-toggle w-100 text-start" type="button"
                id="componentDropdownBtn" data-bs-toggle="dropdown" aria-expanded="false" data-bs-auto-close="outside">
                Select Components...
            </button>
            <div class="dropdown-menu w-100 p-2" aria-labelledby="componentDropdownBtn" id="componentChecklist"
                style="max-height: 250px; overflow-y: auto;">
                {# Checkboxes will be populated by JS #}
                <div class="text-muted p-2" id="componentLoadingMsg">Enter a course to see components.</div>
            </div>
        </div>
        <input type="text" class="form-control mt-1" id="component" name="component"
            placeholder="Or type '?' to list via CLI" readonly>
        <div class="form-text text-muted">Select from dropdown or use '?' to list via CLI.</div>
    </div>

    <div class="col-md-4 mb-3">
        <label for="tag" class="form-label">Tag</label>
        <input type="text" class="form-control" id="tag" name="tag" value="dashboard">
        <div class="form-text text-muted">Optional tag for grouping.</div> {# Added form text #}
    </div>
</div>