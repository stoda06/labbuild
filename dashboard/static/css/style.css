/* dashboard/static/css/style.css */

/* --- Google Font Import --- */
@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap');

/*
   ========================================
   1. CSS Variables (Themes & Status Colors)
   ========================================
*/
:root {
    /* Light Mode Colors (Defaults) */
    --body-bg: #f0f2f5; /* Slightly softer than pure ECECEC */
    --body-color: #212529; /* Bootstrap's default body text color */
    --navbar-bg: #FFFFFF;
    --navbar-color: #000000;
    --card-bg: #FFFFFF;
    --card-color: #212529;
    --card-border: #dee2e6; /* Bootstrap's default card border */
    --card-header-bg: #f8f9fa; /* Bootstrap's default light card header */
    --card-header-color: #212529;
    --form-bg: #FFFFFF;
    --form-color: #212529;
    --form-border: #ced4da; /* Bootstrap's default form input border */
    --form-placeholder-color: #6c757d;
    --table-border: #dee2e6;
    --table-striped-bg: rgba(0, 0, 0, 0.025); /* Lighter stripe */
    --table-hover-bg: rgba(0, 0, 0, 0.05);  /* Lighter hover */
    --link-color: #0d6efd;
    --link-hover-color: #0a58ca;
    --sidebar-bg: #FFFFFF;
    --sidebar-border: #dee2e6;
    --sidebar-header-bg: #f8f9fa;
    --sidebar-link-color: #333; /* Darker link for light sidebar */
    --sidebar-link-hover-bg: #e9ecef;
    --sidebar-link-active-color: #0d6efd;
    --sidebar-divider-color: #dee2e6;

    /* Status Colors */
    --status-running: #fd7e14;
    --status-completed: #198754;
    --status-completed_with_errors: #ffc107;
    --status-failed: #dc3545; /* Bootstrap's danger color */
    --status-failed_exception: #dc3545;
    --status-terminated_by_user: #6c757d;
    --status-unknown: #6c757d;
    --status-skipped: #adb5bd;
    --status-success: #198754;
}

/* --- Dark Mode Overrides using Bootstrap's data-bs-theme attribute --- */
html[data-bs-theme="dark"] {
    --body-bg: #0d1117; /* GitHub dark background */
    --body-color: #c9d1d9; /* GitHub dark text */
    --navbar-bg: #161b22; /* GitHub dark header */
    --navbar-color: #c9d1d9;
    --card-bg: #1c2128;   /* Slightly lighter than navbar */
    --card-color: #c9d1d9;
    --card-border: #30363d; /* GitHub dark border */
    --card-header-bg: #22272e; /* Slightly darker than card body */
    --card-header-color: #c9d1d9;
    --form-bg: #0d1117; /* Match body for inputs */
    --form-color: #c9d1d9;
    --form-border: #30363d;
    --form-placeholder-color: #768390;
    --table-border: #30363d;
    --table-striped-bg: rgba(180, 180, 180, 0.07); /* Subtle stripe */
    --table-hover-bg: rgba(180, 180, 180, 0.1);   /* Subtle hover */
    --link-color: #58a6ff; /* GitHub dark link */
    --link-hover-color: #79c0ff;
    --sidebar-bg: #161b22;
    --sidebar-border: #30363d;
    --sidebar-header-bg: #161b22; /* Same as sidebar body */
    --sidebar-link-color: #c9d1d9;
    --sidebar-link-hover-bg: #22272e;
    --sidebar-link-active-color: #58a6ff;
    --sidebar-divider-color: #30363d;

    /* Status Text Colors for Dark Mode */
    --status-failed-dark-text: #ff7b72; /* Lighter red */
    --status-success-dark-text: #7ee787; /* Lighter green */
    --status-warning-dark-text: #f0b9 circunferencia; /* Lighter yellow/orange */
    --status-running-dark-text: #f0b94a; /* GitHub orange */
    --status-skipped-dark-text: #768390; /* GitHub muted text */

    /* Override Bootstrap component variables for dark theme if needed */
    --bs-body-bg: var(--body-bg);
    --bs-body-color: var(--body-color);
    --bs-border-color: var(--card-border);
    --bs-emphasis-color: var(--body-color); /* Ensure emphasis color is readable */
    --bs-secondary-color: rgba(var(--body-color-rgb), 0.75);
    --bs-secondary-bg: #22272e; /* For elements like <pre> */
    --bs-tertiary-bg: #161b22;
    --bs-primary-text-emphasis: var(--link-color);
    --bs-secondary-text-emphasis: rgba(var(--body-color-rgb), 0.85);
    --bs-success-text-emphasis: var(--status-success-dark-text);
    --bs-info-text-emphasis: var(--link-color);
    --bs-warning-text-emphasis: var(--status-warning-dark-text);
    --bs-danger-text-emphasis: var(--status-failed-dark-text);
    --bs-light-text-emphasis: var(--body-color);
    --bs-dark-text-emphasis: var(--body-color);
    --bs-link-color: var(--link-color);
    --bs-link-hover-color: var(--link-hover-color);
    --bs-heading-color: var(--body-color);
    --bs-nav-link-color: var(--sidebar-link-color);
    --bs-nav-link-hover-color: var(--sidebar-link-active-color);
    --bs-card-cap-bg: var(--card-header-bg);
    --bs-card-border-color: var(--card-border);
    --bs-card-bg: var(--card-bg);
    --bs-list-group-bg: var(--card-bg);
    --bs-list-group-border-color: var(--card-border);
    --bs-list-group-color: var(--card-color);
    --bs-list-group-action-hover-bg: var(--table-hover-bg);
    --bs-list-group-action-active-bg: var(--link-color);
    --bs-list-group-action-active-color: #fff;
    --bs-dropdown-bg: var(--card-bg);
    --bs-dropdown-border-color: var(--card-border);
    --bs-dropdown-link-color: var(--card-color);
    --bs-dropdown-link-hover-bg: var(--table-hover-bg);
    --bs-dropdown-divider-bg: var(--card-border);
    --bs-dropdown-header-color: var(--card-header-color);

}


/*
   ========================================
   2. Base Body & Layout Styles
   ========================================
*/
body {
    font-family: 'Montserrat', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: var(--bs-body-bg); /* Use Bootstrap's variable that respects data-bs-theme */
    color: var(--bs-body-color);
    margin: 0;
    padding-top: 56px; 
    min-height: 100vh;
    font-size: 0.95rem; /* Slightly smaller base font */
    line-height: 1.6;
    transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
}

/* Main content wrapper for consistent padding */
.container-fluid {
    padding-right: 1.5rem; 
    padding-left: 1.5rem;
}


/*
   ========================================
   3. Navbar Styles
   ========================================
*/
.navbar { /* Bootstrap class .navbar ensures it picks up data-bs-theme styles */
    height: 56px;
    /* box-shadow: 0 2px 4px rgba(0,0,0,0.04); /* Softer shadow from base.html */
    /* border-bottom property is already on the nav tag in base.html */
}
/* Active nav link highlight */
.navbar-nav .nav-link.active {
    font-weight: 600; 
}
/* Settings cog button specific styling if Bootstrap's default btn-outline-secondary isn't enough */
#sidebarToggle {
    font-size: 1.1rem;
}


/*
   ========================================
   4. Sidebar Styles
   ========================================
*/
.sidebar {
    height: 100%;
    width: 260px; /* Slightly narrower */
    position: fixed;
    z-index: 1035; /* Higher than navbar to overlay if needed */
    top: 0;
    right: -260px; 
    background-color: var(--sidebar-bg);
    border-left: 1px solid var(--sidebar-border);
    overflow-y: auto; /* Scroll only if content overflows */
    overflow-x: hidden;
    transition: right 0.25s ease-in-out;
    padding-top: 0;
    box-shadow: -3px 0 10px rgba(0,0,0,0.1);
    display: flex;
    flex-direction: column;
}
.sidebar.open { right: 0; }
.sidebar-header {
    padding: 0.9rem 1.25rem; /* Adjusted padding */
    border-bottom: 1px solid var(--sidebar-border);
    display: flex;
    justify-content: space-between;
    align-items: center;
    height: 56px;
    background-color: var(--sidebar-header-bg);
}
.sidebar-header h5 { margin-bottom: 0; color: var(--sidebar-link-color); font-weight: 600; }
.sidebar .nav-link {
    padding: 0.75rem 1.25rem; /* Adjusted padding */
    color: var(--sidebar-link-color);
    display: flex;
    align-items: center;
    transition: background-color 0.15s ease, color 0.15s ease;
    text-decoration: none;
    border-right: 3px solid transparent;
    font-size: 0.9rem;
}
.sidebar .nav-link:hover {
    background-color: var(--sidebar-link-hover-bg);
    color: var(--sidebar-link-active-color);
}
.sidebar .nav-link.active {
    background-color: var(--sidebar-link-hover-bg); /* Or a distinct active background */
    color: var(--sidebar-link-active-color);
    border-right-color: var(--sidebar-link-active-color);
    font-weight: 500;
}
.sidebar .nav-link i.fas.fa-fw { /* Ensure fa-fw is used on icons for alignment */
    margin-right: 0.85rem; 
}
.sidebar hr.sidebar-divider {
    margin: 0.75rem 1rem; /* More spacing for hr */
    border-top: 1px solid var(--sidebar-divider-color);
}

/*
   ========================================
   5. Main Content Area Styles
   ========================================
*/
.main-content {
    transition: margin-right 0.25s ease-in-out; /* Match sidebar transition */
    padding-top: 56px; /* Already set on body */
    /* No shift needed if sidebar overlays */
}
/* If sidebar pushes content, use these (uncomment in base.html too) */
/* .main-content.shifted { margin-right: 260px; width: calc(100% - 260px); } */
/* body.sidebar-open-no-scroll { overflow: hidden; } */


/*
   ========================================
   6. Card & Form Element Styles (Relying more on Bootstrap variables)
   ========================================
*/
.card {
    border-radius: 0.4rem; /* Slightly less rounded */
    margin-bottom: 1.5rem; /* Default spacing */
    /* Bootstrap card class with data-bs-theme handles bg, color, border, shadow */
}
.card-header {
    font-size: 1.1rem; /* Slightly smaller header */
    font-weight: 600;
    padding: 0.85rem 1.25rem;
    /* Bootstrap card-header class with data-bs-theme handles bg, color, border */
}
.card-body {
    padding: 1.25rem;
}
.form-label {
    font-weight: 500; /* Slightly less bold */
    margin-bottom: 0.3rem;
    font-size: 0.875rem;
}
/* .form-select, .form-control are themed by Bootstrap via data-bs-theme */
.form-control::placeholder { color: var(--form-placeholder-color); }


/*
   ========================================
   7. Button Styles (Leverage Bootstrap, override if necessary)
   ========================================
*/
.btn {
    /* padding, border-radius, cursor, font-size, transition are fine from Bootstrap */
    font-weight: 500; /* Slightly less bold than default 600 */
}
/* .btn-danger:hover { background-color: #B71C1C; opacity: 1; } /* Example specific hover */


/*
   ========================================
   8. Table Styles (Leverage Bootstrap, override if necessary)
   ========================================
*/
.table { /* Bootstrap table class handles theming with data-bs-theme */
    margin-bottom: 0; /* Ensure no bottom margin if card-body has p-0 */
}
.table th, .table td {
    padding: 0.6rem 0.75rem; /* Slightly adjust padding */
    /* vertical-align, border-bottom handled by Bootstrap */
}
.table thead th {
     /* font-weight, border-top handled by Bootstrap */
     border-bottom-width: 1px; /* Match other table borders */
}
/* Removed .table > :not(caption) > :last-child > * { border-bottom-width: 0; }
   as Bootstrap's default handling for tables inside cards (if .card-body.p-0 is used) or
   .table-group-divider usually looks fine. Add back if borders are inconsistent. */

/* Custom striping for tag groups (if .table-striped is NOT on the table tag) */
.tag-group-shade-0 { background-color: var(--bs-table-bg); }
.tag-group-shade-1 { background-color: var(--bs-table-striped-bg); }


/*
   ========================================
   9. Dark Mode Specific Overrides (If Bootstrap variables aren't enough)
   ========================================
*/
/* Most dark mode styling should now come from html[data-bs-theme="dark"] vars */
/* and Bootstrap's own dark mode component styles. */
/* Use this section for very specific overrides if needed. */

/* Example: If Bootstrap's dark alert text is hard to read */
/* html[data-bs-theme="dark"] .alert-warning {
    color: #332701;
    background-color: #fff3cd;
    border-color: #ffe69c;
} */


/*
   ========================================
   10. Utility & Specific Component Styles
   ========================================
*/
.rotate { transform: rotate(360deg); transition: transform 0.5s ease; }

/* Status Text Classes (using CSS variables for theme adaptability) */
.status-running { color: var(--status-running); }
html[data-bs-theme="dark"] .status-running { color: var(--status-running-dark-text, var(--status-running)); }

.status-completed, .status-success { color: var(--status-success); }
html[data-bs-theme="dark"] .status-completed,
html[data-bs-theme="dark"] .status-success { color: var(--status-success-dark-text, var(--status-success)); }

.status-completed_with_errors { color: var(--status-completed_with_errors); }
html[data-bs-theme="dark"] .status-completed_with_errors { color: var(--status-warning-dark-text, var(--status-completed_with_errors)); }

.status-failed, .status-failed_exception { color: var(--status-failed); }
html[data-bs-theme="dark"] .status-failed,
html[data-bs-theme="dark"] .status-failed_exception { color: var(--status-failed-dark-text, var(--status-failed)); }

.status-terminated_by_user, .status-unknown { color: var(--status-unknown); }
/* No specific dark override for these, will use var(--body-color) or var(--bs-secondary-color) effectively */

.status-skipped { color: var(--status-skipped); }
html[data-bs-theme="dark"] .status-skipped { color: var(--status-skipped-dark-text, var(--status-skipped)); }


/* Spinner alignment in status cells */
.status-cell .spinner-border {
    vertical-align: -0.125em; /* Bootstrap's default for spinners */
    width: 0.875rem; height: 0.875rem; /* Slightly smaller */
    border-width: 0.15em;
}

/* Log Detail Page Specifics */
#detailed-log-output, /* From log_detail.html */
.rules-table td pre, 
.configs-table td pre { /* From settings pages */
    background-color: var(--bs-tertiary-bg); /* Use a Bootstrap variable */
    border: 1px solid var(--bs-border-color-translucent); /* Use BS variable */
    color: var(--bs-body-color);
    padding: 10px; border-radius: var(--bs-border-radius);
    font-size: 0.8rem; max-height: 600px; overflow-y: auto;
    white-space: pre-wrap; word-break: break-all;
    font-family: Consolas, 'Courier New', monospace;
}

/*
   ========================================
   11. Responsive Adjustments
   ========================================
*/
@media (max-width: 991.98px) { /* lg breakpoint */
    /* Navbar main links are already handled by Bootstrap's navbar-expand-lg and collapse */
    /* Sidebar toggle button is always visible due to its placement outside collapse */
    /* No need for .main-content.shifted if sidebar overlays */
}

@media (max-width: 767.98px) { /* md breakpoint */
    body { padding-top: 56px; } /* Ensure consistent padding */
    .card-header { font-size: 1.05rem; padding: 0.75rem 1rem; }
    .card-body { padding: 1rem; }
    .container-fluid { padding-right: 0.75rem; padding-left: 0.75rem; }
}